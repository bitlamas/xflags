/* X Country Flags - Styles */

/* Flag element */
.xflag-country {
  display: inline-flex;
  align-items: center;
  margin-left: 4px;
  margin-right: 4px;
  line-height: 1;
  vertical-align: middle;
  cursor: help;
  position: relative;
}

/* Flag image */
.xflag-flag-img {
  width: 16px;
  height: 11px;
  display: inline-block;
  vertical-align: middle;
  object-fit: contain;
  border: none;
  padding: 0;
  margin: 0;
}

/* Loading flag animation - dots traveling around rectangle perimeter */
.xflag-loading-box {
  width: 16px;
  height: 11px;
  display: inline-block;
  vertical-align: middle;
  position: relative;
  image-rendering: pixelated;
}

/* Base dot style */
.xflag-loading-box .xflag-dot {
  position: absolute;
  width: 3px;
  height: 3px;
  border-radius: 50%;
  background: #1d9bf0; /* X/Twitter blue */
  transform: translate(-50%, -50%) scale(0.35);
  opacity: 0.15;
  animation: xflag-pulse 1.2s linear infinite;
  animation-fill-mode: both;
  will-change: transform, opacity;
}

/* Pulse animation: small -> big -> small */
@keyframes xflag-pulse {
  0%   { transform: translate(-50%, -50%) scale(0.35); opacity: 0.15; }
  40%  { transform: translate(-50%, -50%) scale(1);    opacity: 1;    }
  100% { transform: translate(-50%, -50%) scale(0.35); opacity: 0.15; }
}

/* Position dots exactly on rectangle edges for rectangular motion */
/* Path: top edge → right edge → bottom edge → left edge (clockwise) */
/* Delay step = 1.2s / 12 = 0.1s per dot */

/* Top edge (y=1): 3 dots */
.xflag-loading-box .xflag-dot:nth-child(1)  { left: 4px;  top: 1px;  animation-delay: 0s;     }
.xflag-loading-box .xflag-dot:nth-child(2)  { left: 8px;  top: 1px;  animation-delay: -0.1s;  }
.xflag-loading-box .xflag-dot:nth-child(3)  { left: 12px; top: 1px;  animation-delay: -0.2s;  }

/* Right edge (x=15): 3 dots */
.xflag-loading-box .xflag-dot:nth-child(4)  { left: 15px; top: 3px;  animation-delay: -0.3s;  }
.xflag-loading-box .xflag-dot:nth-child(5)  { left: 15px; top: 5.5px; animation-delay: -0.4s; }
.xflag-loading-box .xflag-dot:nth-child(6)  { left: 15px; top: 8px;  animation-delay: -0.5s;  }

/* Bottom edge (y=10): 3 dots */
.xflag-loading-box .xflag-dot:nth-child(7)  { left: 12px; top: 10px; animation-delay: -0.6s;  }
.xflag-loading-box .xflag-dot:nth-child(8)  { left: 8px;  top: 10px; animation-delay: -0.7s;  }
.xflag-loading-box .xflag-dot:nth-child(9)  { left: 4px;  top: 10px; animation-delay: -0.8s;  }

/* Left edge (x=1): 3 dots */
.xflag-loading-box .xflag-dot:nth-child(10) { left: 1px;  top: 8px;  animation-delay: -0.9s;  }
.xflag-loading-box .xflag-dot:nth-child(11) { left: 1px;  top: 5.5px; animation-delay: -1.0s; }
.xflag-loading-box .xflag-dot:nth-child(12) { left: 1px;  top: 3px;  animation-delay: -1.1s;  }

/* Respect reduced-motion preference */
@media (prefers-reduced-motion: reduce) {
  .xflag-loading-box .xflag-dot {
    animation: none;
    opacity: 1;
    transform: translate(-50%, -50%) scale(0.7);
  }
}

/* VPN indicator text (positioned LEFT of flag) */
.xflag-vpn-indicator {
  display: inline-block;
  font-size: 8px;
  font-weight: 600;
  color: #657786; /* Muted gray */
  line-height: 11px; /* Match flag height */
  vertical-align: middle;
  margin-right: 2px; /* Small gap before flag */
  max-width: 16px;
  text-align: center;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  letter-spacing: -0.3px; /* Condense slightly */
  cursor: help;
  user-select: none;
}

/* Add small left margin to flag when VPN indicator is present */
.xflag-country:has(.xflag-vpn-indicator) .xflag-flag-img {
  margin-left: 3px;
}

/* Rate-limited indicator - clock icon showing request is queued */
.xflag-rate-limited-box {
  width: 16px;
  height: 11px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  position: relative;
  color: #657786; /* Muted gray */
  font-size: 10px;
  line-height: 1;
  cursor: help;
}

/* Clock icon using CSS */
.xflag-rate-limited-box::before {
  content: '';
  width: 10px;
  height: 10px;
  border: 1.5px solid #657786;
  border-radius: 50%;
  position: absolute;
}

/* Clock hands */
.xflag-rate-limited-box::after {
  content: '';
  position: absolute;
  width: 0;
  height: 0;
  /* Hour hand pointing to 12 */
  border-left: 1px solid transparent;
  border-right: 1px solid transparent;
  border-bottom: 3px solid #657786;
  transform: translateY(-1px);
}

/* Minute hand */
.xflag-clock-minute {
  position: absolute;
  width: 1px;
  height: 4px;
  background: #657786;
  transform-origin: bottom center;
  transform: rotate(90deg) translateY(-1px);
  top: 2px;
}

/* Alternative: hourglass using unicode (fallback for simpler rendering) */
.xflag-rate-limited-text {
  font-size: 9px;
  color: #657786;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

/* Tooltip styling (native title attribute) */
.xflag-country:hover {
  opacity: 0.8;
  transition: opacity 0.2s ease;
}

